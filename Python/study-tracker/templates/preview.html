<!DOCTYPE html>
<html>
<head>
    <title>Study Tracker - Preview</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .header { background: #f0f8ff; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .section { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .day { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #007bff; }
        .topic { background: #ffffff; padding: 10px; margin: 5px 0; border-radius: 3px; border: 1px solid #e9ecef; }
        /* New Navigation Bar Styles */
        .nav-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap; /* Allows wrapping on very small screens */
            background-color: #ffffff;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        .nav-link {
            display: flex; /* Aligns icon and text */
            align-items: center;
            white-space: nowrap; /* Prevents icon and text from breaking lines */
            text-decoration: none;
            color: #495057;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            background-color: #f1f3f5;
            color: #007bff;
        }
        .nav-link.active {
            background-color: #e7f3ff;
            color: #007bff;
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
        }
        .time-estimate { color: #666; font-size: 0.9em; }
        .no-topic { color: #999; font-style: italic; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîÆ Upcoming Schedule Preview</h1>
        <p>See what's coming up in the next few days</p>
    </div>

    <!-- New Navigation Bar Structure -->
    <div class="nav-container">
        <a href="/" class="nav-link {% if active_page == 'dashboard' %}active{% endif %}" title="Go to Dashboard">üìÖ Dashboard</a>
        <a href="/history" class="nav-link {% if active_page == 'history' %}active{% endif %}" title="View Progress History">üìä History</a>
        <a href="/preview" class="nav-link {% if active_page == 'preview' %}active{% endif %}" title="See Upcoming Topics">üîÆ Preview</a>
        <a href="/practice" class="nav-link {% if active_page == 'practice' %}active{% endif %}" title="Practice & Mock Interviews">üéØ Practice</a>
        <a href="/analytics" class="nav-link {% if active_page == 'analytics' %}active{% endif %}" title="Analyze Your Performance">üìà Analytics</a>
        <a href="/curriculum" class="nav-link {% if active_page == 'curriculum' %}active{% endif %}" title="Edit the Curriculum">üìö Curriculum</a>
        <a href="/templates" class="nav-link {% if active_page == 'templates' %}active{% endif %}" title="Coding Patterns & Templates">üîß Templates</a>
        <a href="/config" class="nav-link {% if active_page == 'config' %}active{% endif %}" title="Configure Your Plan">‚öôÔ∏è Config</a>
        <a href="/help" class="nav-link {% if active_page == 'help' %}active{% endif %}" title="Get Help">‚ùì Help</a>
    </div>

    <div class="section">
        <h2>üìÖ Next 3 Days</h2>

        {% if preview_days %}
            {% for day_info in preview_days %}
            <div class="day">
                <h3>Day {{ day_info.day }} - {{ day_info.date }}</h3>

                <div class="topic">
                    <h4>üíª Coding</h4>
                    {% if day_info.coding %}
                        <p><strong>{{ day_info.coding.topic }}</strong></p>
                        <p>{{ day_info.coding.activity }}</p>
                        <p class="time-estimate">‚è±Ô∏è {{ day_info.coding.time_estimate }} minutes</p>
                        {% if day_info.coding.problems %}
                        <p><strong>Problems:</strong>
                        {% for problem in day_info.coding.problems %}
                            <span style="display: inline-block; background: #e9f7ff; padding: 2px 6px; border-radius: 3px; margin: 1px; font-size: 0.9em;">
                                {{ problem.number }}. {{ problem.title }}
                            </span>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                        </p>
                        {% endif %}
                    {% else %}
                        <p class="no-topic">No coding topic scheduled</p>
                    {% endif %}
                </div>

                <div class="topic">
                    <h4>üèóÔ∏è System Design</h4>
                    {% if day_info.system_design %}
                        <p><strong>{{ day_info.system_design.topic }}</strong></p>
                        <p>{{ day_info.system_design.activity }}</p>
                        <p class="time-estimate">‚è±Ô∏è {{ day_info.system_design.time_estimate }} minutes</p>
                        {% if day_info.system_design.concepts %}
                        <p><strong>Concepts:</strong> {{ day_info.system_design.concepts | join(', ') }}</p>
                        {% endif %}
                    {% else %}
                        <p class="no-topic">No system design topic scheduled</p>
                    {% endif %}
                </div>

                <p class="time-estimate">
                    <strong>Total estimated time: {{ (day_info.coding.time_estimate if day_info.coding else 0) + (day_info.system_design.time_estimate if day_info.system_design else 0) }} minutes</strong>
                </p>
            </div>
            {% endfor %}
        {% else %}
            <p>üìö You're at the end of the 28-day program! Congratulations! üéâ</p>
            <p>Consider:</p>
            <ul>
                <li>Reviewing your weakest topics</li>
                <li>Doing more mock interviews</li>
                <li>Practicing company-specific problems</li>
            </ul>
        {% endif %}
    </div>

    <div class="section">
        <h2>üí° Planning Tips</h2>
        <ul>
            <li><strong>Block your calendar</strong> for the estimated time each day</li>
            <li><strong>Prepare materials</strong> - have LeetCode open, notebooks ready</li>
            <li><strong>Plan reviews</strong> - you'll have spaced repetition reviews mixed in</li>
            <li><strong>Stay consistent</strong> - daily practice builds the strongest foundation</li>
        </ul>
    </div>
</body>
</html>